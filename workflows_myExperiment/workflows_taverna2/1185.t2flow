<workflow xmlns="http://taverna.sf.net/2008/xml/t2flow" version="1" producedBy="taverna-2.1.0"><dataflow id="4e7ec97e-4df6-4c78-9202-d0d38ddce312" role="top"><name>Extract_proteins_from_xml_blast_results</name><inputPorts><port><name>blastFile</name><depth>0</depth><granularDepth>0</granularDepth><annotations><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>filepath of blast results in order to import them in</text>      </annotationBean>      <date>2010-03-19 03:42:16.938 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port><port><name>tfasta</name><depth>0</depth><granularDepth>0</granularDepth><annotations><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>imported fasta of target proteins</text>      </annotationBean>      <date>2010-03-19 03:43:58.712 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port><port><name>list_of_proteins</name><depth>0</depth><granularDepth>0</granularDepth><annotations><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>filepath used to save the list of proteins of interest</text>      </annotationBean>      <date>2010-03-19 03:41:38.406 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port><port><name>end_file_path</name><depth>0</depth><granularDepth>0</granularDepth><annotations><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>filepath used to save a fasta format of the proteins of interest</text>      </annotationBean>      <date>2010-03-19 03:44:31.67 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></port></inputPorts><outputPorts /><processors><processor><name>Read_Text_File</name><inputPorts><port><name>fileurl</name><depth>0</depth></port></inputPorts><outputPorts><port><name>filecontents</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>localworker-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.localworker.LocalworkerActivity</class><inputMap><map from="fileurl" to="fileurl" /></inputMap><outputMap><map from="filecontents" to="filecontents" /></outputMap><configBean encoding="xstream"><net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean xmlns="">  <localworkerName>net.sourceforge.taverna.scuflworkers.io.TextFileReader</localworkerName>  <script>BufferedReader getReader (String fileUrl) throws IOException {		InputStreamReader reader;		try {			reader = new FileReader(fileUrl);		}		catch (FileNotFoundException e) {			// try a real URL instead			URL url = new URL(fileUrl);			reader = new InputStreamReader (url.openStream());		}		return new BufferedReader(reader);	}StringBuffer sb = new StringBuffer(4000);BufferedReader in = getReader(fileurl);String str;String lineEnding = System.getProperty("line.separator");while ((str = in.readLine()) != null) {	sb.append(str);	sb.append(lineEnding);}in.close();filecontents = sb.toString();  </script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>fileurl</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>filecontents</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="fileurl" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>Extract_unique_proteins</name><inputPorts><port><name>xml_result</name><depth>0</depth></port></inputPorts><outputPorts><port><name>gi_lines_val</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>beanshell-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class><inputMap><map from="xml_result" to="xml_result" /></inputMap><outputMap><map from="gi_lines_val" to="gi_lines_val" /></outputMap><configBean encoding="xstream"><net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean xmlns="">  <script>//import xml format of blast results	String input = xml_result;        ArrayList gi_lines = new ArrayList();        while (input.contains("&lt;Iteration_hits&gt;")){            //finds start and end of Iteration_query-def tag            int start_tag1 = input.indexOf("&lt;Iteration_query-def&gt;") + 20;            int end_tag1 = input.indexOf("&lt;/Iteration_query-def&gt;");            //get the protein identifier            String output = input.substring(start_tag1, end_tag1);            //removes identifier            input = input.substring(end_tag1 + 22);            //finds the start of Iteration_hit tag            int start_tag2 = input.indexOf("&lt;Iteration_hits&gt;");            //finds next start of Iteration_query-def tag            start_tag1 = input.indexOf("&lt;Iteration_query-def&gt;") + 20;            if(start_tag1 == 19) {                start_tag1 = start_tag2 + 1;            }	//If there is a hit for the protein, then store protein info            if(start_tag2&lt;start_tag1) {                gi_lines.add(output);                //removes no results string                input = input.substring(start_tag2 + 19);            }        }//end of while//output gi ids as a string        String gi_val_out = "";        for(int i = 0; i&lt;gi_lines.size(); i++) {            gi_val_out = gi_val_out + gi_lines.get(i).toString() + "\n";        }//export gi idsgi_lines_val = gi_val_out;</script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>xml_result</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>gi_lines_val</name>      <depth>0</depth>      <mimeTypes />    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="xml_result" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>Tfasta_parser</name><inputPorts><port><name>gi_val</name><depth>0</depth></port><port><name>tfasta_in</name><depth>0</depth></port></inputPorts><outputPorts><port><name>cfasta_out</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>beanshell-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class><inputMap><map from="gi_val" to="gi_val" /><map from="tfasta_in" to="tfasta_in" /></inputMap><outputMap><map from="cfasta_out" to="cfasta_out" /></outputMap><configBean encoding="xstream"><net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean xmlns="">  <script>//import target fasta	String input = tfasta_in;	String[] target_array = input.split("\n");//import gi ids	String input2 = gi_val;        String[] gi_array = input2.split("\n");        String fastas = "";        String value = "";        boolean found = false;//for each value in the gi_array, compare values for each value in the target_array	for(int i = 0; i&lt;gi_array.length; i++){            for(int n = 0; n&lt;target_array.length; n++) {                if(target_array[n].contains("&gt;")){                    found = false;                }                if(target_array[n].contains(gi_array[i])) {                    value = target_array[n] + "\n";                    found = true;                }                if(!target_array[n].contains("&gt;") &amp;&amp; found)                {                    value = value + target_array[n] + "\n";                }            }            fastas = fastas + value;        }//end for//export fasta formatcfasta_out = fastas;</script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>gi_val</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>tfasta_in</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>cfasta_out</name>      <depth>0</depth>      <mimeTypes />    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="gi_val" depth="0" /><port name="tfasta_in" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>Write_Text_File</name><inputPorts><port><name>filecontents</name><depth>0</depth></port><port><name>outputFile</name><depth>0</depth></port></inputPorts><outputPorts /><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>localworker-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.localworker.LocalworkerActivity</class><inputMap><map from="outputFile" to="outputFile" /><map from="filecontents" to="filecontents" /></inputMap><outputMap /><configBean encoding="xstream"><net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean xmlns="">  <localworkerName>net.sourceforge.taverna.scuflworkers.io.TextFileWriter</localworkerName>  <script>BufferedWriter out = new BufferedWriter(new FileWriter(outputFile));out.write(filecontents);out.close();outputFile = filecontents;</script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>outputFile</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>filecontents</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>outputFile</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="filecontents" depth="0" /><port name="outputFile" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>extract_gis</name><inputPorts><port><name>gi_lines_in</name><depth>0</depth></port></inputPorts><outputPorts><port><name>gis</name><depth>0</depth><granularDepth>0</granularDepth></port></outputPorts><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>beanshell-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.beanshell.BeanshellActivity</class><inputMap><map from="gi_lines_in" to="gi_lines_in" /></inputMap><outputMap><map from="gis" to="gis" /></outputMap><configBean encoding="xstream"><net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean xmlns="">  <script>//Extracts the gi ids from the protein infoString input = gi_lines_in;String[] gi_array = input.split("\n");String ids = "";for(int i = 0; i&lt;gi_array.length; i++){	ids = ids + gi_array[i].substring(4,12) + "\n";}gis = ids;</script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>gi_lines_in</name>      <depth>0</depth>      <mimeTypes>        <string>text/plain</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>gis</name>      <depth>0</depth>      <mimeTypes />    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.beanshell.BeanshellActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="gi_lines_in" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor><processor><name>Write_Text_File_2</name><inputPorts><port><name>filecontents</name><depth>0</depth></port><port><name>outputFile</name><depth>0</depth></port></inputPorts><outputPorts /><annotations /><activities><activity><raven><group>net.sf.taverna.t2.activities</group><artifact>localworker-activity</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.activities.localworker.LocalworkerActivity</class><inputMap><map from="outputFile" to="outputFile" /><map from="filecontents" to="filecontents" /></inputMap><outputMap /><configBean encoding="xstream"><net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean xmlns="">  <localworkerName>net.sourceforge.taverna.scuflworkers.io.TextFileWriter</localworkerName>  <script>BufferedWriter out = new BufferedWriter(new FileWriter(outputFile));out.write(filecontents);out.close();outputFile = filecontents;</script>  <dependencies />  <classLoaderSharing>workflow</classLoaderSharing>  <localDependencies />  <artifactDependencies />  <inputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>outputFile</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>      <handledReferenceSchemes />      <translatedElementType>java.lang.String</translatedElementType>      <allowsLiteralValues>true</allowsLiteralValues>      <name>filecontents</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityInputPortDefinitionBean>  </inputs>  <outputs>    <net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>      <granularDepth>0</granularDepth>      <name>outputFile</name>      <depth>0</depth>      <mimeTypes>        <string>'text/plain'</string>      </mimeTypes>    </net.sf.taverna.t2.workflowmodel.processor.activity.config.ActivityOutputPortDefinitionBean>  </outputs></net.sf.taverna.t2.activities.localworker.LocalworkerActivityConfigurationBean></configBean><annotations /></activity></activities><dispatchStack><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Parallelize</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig xmlns="">  <maxJobs>1</maxJobs></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ParallelizeConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.ErrorBounce</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Failover</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Retry</class><configBean encoding="xstream"><net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig xmlns="">  <backoffFactor>1.0</backoffFactor>  <initialDelay>1000</initialDelay>  <maxDelay>5000</maxDelay>  <maxRetries>0</maxRetries></net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.RetryConfig></configBean></dispatchLayer><dispatchLayer><raven><group>net.sf.taverna.t2.core</group><artifact>workflowmodel-impl</artifact><version>1.0</version></raven><class>net.sf.taverna.t2.workflowmodel.processor.dispatch.layers.Invoke</class><configBean encoding="xstream"><null xmlns="" /></configBean></dispatchLayer></dispatchStack><iterationStrategyStack><iteration><strategy><cross><port name="filecontents" depth="0" /><port name="outputFile" depth="0" /></cross></strategy></iteration></iterationStrategyStack></processor></processors><conditions><condition control="Read_Text_File" target="Extract_unique_proteins" /></conditions><datalinks><datalink><sink type="processor"><processor>Read_Text_File</processor><port>fileurl</port></sink><source type="dataflow"><port>blastFile</port></source></datalink><datalink><sink type="processor"><processor>Extract_unique_proteins</processor><port>xml_result</port></sink><source type="processor"><processor>Read_Text_File</processor><port>filecontents</port></source></datalink><datalink><sink type="processor"><processor>Tfasta_parser</processor><port>gi_val</port></sink><source type="processor"><processor>Extract_unique_proteins</processor><port>gi_lines_val</port></source></datalink><datalink><sink type="processor"><processor>Tfasta_parser</processor><port>tfasta_in</port></sink><source type="dataflow"><port>tfasta</port></source></datalink><datalink><sink type="processor"><processor>Write_Text_File</processor><port>filecontents</port></sink><source type="processor"><processor>Tfasta_parser</processor><port>cfasta_out</port></source></datalink><datalink><sink type="processor"><processor>Write_Text_File</processor><port>outputFile</port></sink><source type="dataflow"><port>end_file_path</port></source></datalink><datalink><sink type="processor"><processor>extract_gis</processor><port>gi_lines_in</port></sink><source type="processor"><processor>Extract_unique_proteins</processor><port>gi_lines_val</port></source></datalink><datalink><sink type="processor"><processor>Write_Text_File_2</processor><port>filecontents</port></sink><source type="processor"><processor>extract_gis</processor><port>gis</port></source></datalink><datalink><sink type="processor"><processor>Write_Text_File_2</processor><port>outputFile</port></sink><source type="dataflow"><port>list_of_proteins</port></source></datalink></datalinks><annotations><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle">        <text />      </annotationBean>      <date>2010-03-19 03:31:14.148 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>The workflow extracts a list of proteins from the target genome that may be known drugs using the blast similarity results. </text>      </annotationBean>      <date>2010-03-19 03:39:32.810 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.Author">        <text>Bela Tiwari</text>      </annotationBean>      <date>2010-03-15 11:30:59.109 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle">        <text>fetchEnsemblSeqsAndBlast</text>      </annotationBean>      <date>2010-03-15 11:30:59.109 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text>This workflow allows you to configure a BioMart query to fetch sequences you want from Ensembl. These sequences are retrieved and a blast database of them is created (by default, in the directory you ran taverna from). Warning: This workflow assumes that you have blastall and formatdb installed on the machine, and that by default, these are both found or linked in /usr/local/bin. It also assumes that you have write permission to the directory you have run taverna from. The beanshells "create_blastall_cmdArgs" and "create_formatdb_cmdArgs" are what you need to edit if the default locations are not appropriate for you.Shortcomings:The names of all the files created and used is hard coded in this workflow. This means that if you run this workflow more than once without editing anything, you will overwrite files you have previously created.All files created in the working directory are not yet coded to be deleted via the workflow. Ideally there would be an option that a user could choose that would set the files to be kept or deleted after use.</text>      </annotationBean>      <date>2010-03-15 11:30:59.109 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.DescriptiveTitle">        <text>Extract proteins from xml blast results</text>      </annotationBean>      <date>2010-03-19 03:35:24.348 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.FreeTextDescription">        <text />      </annotationBean>      <date>2010-03-19 03:31:29.374 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain><annotation_chain encoding="xstream"><net.sf.taverna.t2.annotation.AnnotationChainImpl xmlns="">  <annotationAssertions>    <net.sf.taverna.t2.annotation.AnnotationAssertionImpl>      <annotationBean class="net.sf.taverna.t2.annotation.annotationbeans.Author">        <text>nclteamc</text>      </annotationBean>      <date>2010-03-19 03:31:22.978 GMT</date>      <creators />      <curationEventList />    </net.sf.taverna.t2.annotation.AnnotationAssertionImpl>  </annotationAssertions></net.sf.taverna.t2.annotation.AnnotationChainImpl></annotation_chain></annotations></dataflow></workflow>