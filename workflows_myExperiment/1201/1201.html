<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="google-site-verification" content="3hq0Cfhw5_-EaaNMum0ETX847sTl7jeQ3ZNAla4a6UQ" />
  
  <title>myExperiment &#45; Workflows &#45; SBML model optimisation (Peter Li) [Taverna 2 Workflow]</title>
  <link rel="alternate" href="http://www.myexperiment.org/workflows/1201.rdf" type="application/rdf+xml" title="RDF+XML" />
  <link rel="alternate" href="http://www.myexperiment.org/workflows/1201.xml" type="application/xml" title="REST XML" />
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"/>
  <link href="/stylesheets/acts_as_taggable_stylesheet.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/star_rating.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/gadgets.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/misc_skinning.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/pagination.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/bootstrap.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/navbar.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
<link href="/stylesheets/styles.css?1680607579" media="screen" rel="stylesheet" type="text/css" />
  <script src="/javascripts/jquery-1.11.1.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/jquery-noconflict.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/prototype-1.7.2-patched.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/effects.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/dragdrop.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/controls.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/boxover.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/bootstrap.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/tabs.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/folds.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/application.js?1680607579" type="text/javascript"></script>

  
  






  
  
    <script src='//www.google.com/recaptcha/api.js'></script>
  
</head>
<body>



<div class="navbar navbar-myexp" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
          <a id="logo" href="/">
            <img alt="Logo" class="hidden-sm" src="/images/logo.png?1680607579" />
            <img alt="Logo_cropped" class="visible-sm" src="/images/logo_cropped.png?1680607579" />
          </a>
      
    </div>
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        
          <ul class="nav navbar-nav">
  
    <li >
      <a href="/home">Home</a>    </li>
  
    <li >
      <a href="/users">Users</a>    </li>
  
    <li >
      <a href="/groups">Groups</a>    </li>
  
    <li class="active">
      <a href="/workflows">Workflows</a>    </li>
  
    <li >
      <a href="/files">Files</a>    </li>
  
    <li >
      <a href="/packs">Packs</a>    </li>
  
</ul>

        
        
            <form action="/search" class="navbar-form navbar-left" id="search" method="get">
    <div class="input-group">
      <input class="form-control" id="query" name="query" placeholder="Search" type="text" />
      <span class="input-group-btn">
        
        <input class="btn btn-default" name="commit" type="submit" value="Go" />
        </span>
    </div>
</form>

        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
            <li><a href="/session/new?return_to=%2Fworkflows%2F1201.html">Log in</a></li>
    <li><a href="/users/new">Register</a></li>


      </ul>
    </div><!--/.nav-collapse -->
  </div>
  
</div>




    <div class="container" id="main">
      <div id="myexp_breadcrumbs_bar">
        <ol class="breadcrumb">
  <li><a href="/home">Home</a></li>
  


  <li><a href="/workflows">Workflows</a></li>



  
    <li>SBML model optimisation</li>
  


  <div style="float: right"></div>
</ol>

      </div>
      <div id="myexp_content">
        


        



<h1 class="contribution_title">
  SBML model optimisation
</h1>

<div class="contribution_aftertitle">
	<b>Created:</b> 2010-03-26 17:21:53
	
</div>
<ul class="sectionIcons">
  
      <li><span class="icon"><a href="http://www.myexperiment.org/workflows/1201/download/SBML_model_optimisation-v1.t2flow?version=1"><img alt="Download Workflow (for version 1)" src="/images/redmond_studio/arrow-down_16.png?1680607579" /> Download Workflow</a></span></li>
      
  
      
</ul>


<div class="contribution_left_box">

  <div class="contribution_version_box">



    <div class="contribution_version_inner_box">

      
    <div class="contribution_description">
      <p>
This workflow modifies reaction kinetic parameters against experimental data stored in the MCISB key results database
</p>


    </div>


      <h3>
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This section shows the preview of this version of the Workflow (click on the image to expand)] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Preview
      </h3>

      

          <div class="contribution_preview" style="width: 100%;">
            <p style="text-align: center">
              <a href="/workflows/1201/versions/1/previews/full" onclick="window.open(this.href);return false;"><img alt="Medium" src="/workflows/1201/versions/1/previews/medium" /></a>
            </p>
            
                <p style="text-align: right; color: #666666;">
                  <a href="/workflows/1201/versions/1/previews/svg">Download as scalable diagram (SVG)</a>
                </p>
            

            
          </div>
      



      <h3>
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This section provides options for running this version of the Workflow] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Run
      </h3>

      
          
              <div style="margin: 0 0.5em;">
	<h4>
		Run this Workflow in the Taverna Workbench...
	</h4>
	
	<div class="option_box">
		
		<p style="text-align: center;">
			<b>Option 1:</b>
		</p>
		
		<p style="font-size: 93%; text-align: center;">
			Copy and paste this link into File > 'Open workflow location...'<br/>
			<a href="http://www.myexperiment.org/workflows/1201/download?version=1">http://www.myexperiment.org/workflows/1201/download?version=1</a><br/>
			<small>[ <a href="#" onclick="Effect.toggle(&quot;run_taverna_more_box&quot;,'blind',{duration:0.3});; return false;">More Info<img alt="Expand" src="/images/folds/unfold.png?1680607579" style="margin-left: 0.3em; vertical-align: middle;" /></a> ]</small>
		</p>
		
		<div id="run_taverna_more_box" style="display: none;">
			<p style="font-size: 85%; margin-top: 0.5em; text-align: center;">
				Taverna is available from <a href="http://taverna.sourceforge.net/" onclick="window.open(this.href);return false;">http://taverna.sourceforge.net/</a>
			</p>
			
			<p style="text-align: center; margin-top: 0.5em; font-size: 85%;">
				If you are having problems downloading it in Taverna, you may need to provide your username and password in the URL so that Taverna can access the Workflow: <br/>
				
					<b>Replace <font color="#990000">http://</font> in the link above with <font color="#990000">http://yourusername:yourpassword@</font></b>
				
			</p>
		</div>
	
	</div>
</div>


          
      

      <br/>

      <h3>
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This section shows the internal components of this workflow version] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Workflow Components
      </h3>

      
          
              
	    <!-- Authors -->
        <div class="fold">
      <div class="foldTitle">
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This is the author information extracted from the workflow version] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Authors (1)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
                          <tr>
                <td>Peter Li</td>
              </tr>
            
          </table>
        
      </div>
    </div>
    
    <!-- Titles -->
        <div class="fold">
      <div class="foldTitle">
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[These are the descriptive titles embedded within the workflow version] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Titles (1)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
                          <tr>
                <td>SBML model optimisation</td>
              </tr>
            
          </table>
        
      </div>
    </div>

    <!-- Descriptions -->
        <div class="fold">
      <div class="foldTitle">
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[These are the descriptions embedded within the workflow version] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Descriptions (1)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
                          <tr>
                <td>This workflow modifies reaction kinetic parameters against experimental data stored in the MCISB key results database </td>
              </tr>
            
          </table>
        
      </div>
    </div>
        
    <!-- Dependencies -->
        <div class="fold">
      <div class="foldTitle">
        <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[These are the listed dependencies of the workflow] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
        Dependencies (3)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
                          <tr>
                <td>sqlitejdbc-v053.jar</td>
              </tr>
                          <tr>
                <td>libsbmlj.jar</td>
              </tr>
                          <tr>
                <td>libsbml_helpers.jar</td>
              </tr>
            
          </table>
        
      </div>
    </div>
        
    <!-- Sources -->
        <div class="fold">
      <div class="foldTitle">
        Inputs (1)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
          
                          <tr>
                <td><b>sbml</b></td>
                <td>
                  
                    
                      A parameterised SBML model                      
                    
                  
                </td>
              </tr>
            
          </table>
        
      </div>
    </div>
      
    <!-- Processors -->
        <div class="fold">
      <div class="foldTitle">
        Processors (13)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Description</th>
            </tr>
          
                          <tr>
                <td><b>createSysbioDataSource</b></td>
                <td>beanshell</td>
                <td>
                                    <div><h3>Script</h3><pre>import org.sbml.libsbml.*;
import java.sql.*;
import org.sqlite.JDBC;

String DATABASE_NAME = "taverna_sbml";
String databaseURL = "jdbc:sqlite:" + DATABASE_NAME + ".db";

//Set up database
try
{
  //System.loadLibrary("sbmlj");

  driver = "org.sqlite.JDBC";

  Class.forName(driver);
  Connection conn = DriverManager.getConnection(databaseURL);
  Statement stat = conn.createStatement();

  //Create compartment table
  stat.executeUpdate("drop table if exists compartment;");
  stat.executeUpdate("create table compartment (id, name, outside, sboTerm, goId);");

  //Create species table for holding metabolite and enzyme data
  stat.executeUpdate("drop table if exists species;");
  stat.executeUpdate("create table species (id, name, compartmentId, sboTerm, chebi, kegg, inchi, sgd, uniprot);");

  //Create reaction table for holding reactants and products
  stat.executeUpdate("drop table if exists reaction;");
  stat.executeUpdate("create table reaction (id, name, sboTerm, subsystem, ec, pubmed, tag);");

  //Create reactionspecies table for holding associations between species and reaction
  stat.executeUpdate("drop table if exists reactionspecies;");
  stat.executeUpdate("create table reactionspecies (reactionId, speciesId, stoichiometry, role);");

  //====================
  //For storing kinetics
  //====================

  //Create kineticlaw table
  stat.executeUpdate("drop table if exists kineticlaw;");
  stat.executeUpdate("create table kineticlaw (id, reactionId, formula, generalId, reversible);");

  //Create kineticlawvariable table
  stat.executeUpdate("drop table if exists kineticlawvariable;");
  stat.executeUpdate("create table kineticlawvariable (kineticLawId, variableId, relFormula);");

  //Create parameter table
  stat.executeUpdate("drop table if exists parameter;");
  stat.executeUpdate("create table parameter (id INTEGER PRIMARY KEY AUTOINCREMENT, name, role, type, kineticLawId, speciesId, comment, stValue, stDeviation, endValue, unitId);");

  //Create unit table
  stat.executeUpdate("drop table if exists unit;");
  stat.executeUpdate("create table unit (id, description, sbmlUnitId, comment);");

  //Create sbmlunit table
  stat.executeUpdate("drop table if exists sbmlunit;");
  stat.executeUpdate("create table sbmlunit (id, kind, exponent, scale, multiplier, offset);");

  //Create envkineticlaw table
  stat.executeUpdate("drop table if exists envkineticlaw;");
  stat.executeUpdate("create table envkineticlaw (kineticLawId, environDataId);");

  //Create environmentaldata table
  stat.executeUpdate("drop table if exists environmentaldata;");
  stat.executeUpdate("create table environmentaldata (id, stValue, endValue, bufferDescription, description, unitId, comment);");

  //============================
  //Load compartments into table
  //============================
  PreparedStatement prep1 = conn.prepareStatement("insert into compartment values (?, ?, ?, ?, ?);");
  SBMLReader reader = new SBMLReader();
  SBMLDocument doc  = reader.readSBMLFromString(sbml);
  Model m = doc.getModel();
  System.out.println("Model id: " + m.getId());

  ListOfCompartments compList = m.getListOfCompartments();
  for (int i = 0; i < compList.size(); i++)
  {
    Compartment comp = (Compartment) compList.get(i);
    String id = comp.getId();
    String name = comp.getName();
    String outside = comp.getOutside();
    int sboTerm = comp.getSBOTerm();

    String goId = "";
    for (int x = 0; x < comp.getNumCVTerms(); x++)
    {
      CVTerm term = comp.getCVTerm(x);
      XMLAttributes att = term.getResources();
      for (int y = 0; y < att.getLength(); y++)
      {
        String uri = att.getValue(y);
        if (uri.contains("obo.go"))
        {
          goId = uri;
        }
      }
    }

    prep1.setString(1, id);
    prep1.setString(2, name);
    prep1.setString(3, outside);
    prep1.setInt(4, sboTerm);
    prep1.setString(5, goId);
    prep1.addBatch();
  }

  //============================
  //Load species into table
  //============================
  PreparedStatement prep = conn.prepareStatement("insert into species values (?, ?, ?, ?, ?, ?, ?, ?, ?);");
  ListOfSpecies spList = m.getListOfSpecies();
  for (int i = 0; i < spList.size(); i++)
  {
    Species sp = (Species) spList.get(i);
    String id = sp.getId();
    String name = sp.getName();
    String compartment = sp.getCompartment();
    int sboTerm = sp.getSBOTerm();
    if (sboTerm == -1)
      sboTerm = 0;

    String chebi = "";
    String kegg = "";
    String inchi = "";
    String sgd = "";
    String uniprot = "";

    try
    {
      XMLNode node = sp.getAnnotation();
      XMLNode node2 = node.getChild(0);
      XMLNode node3 = node2.getChild(0);
      if(XMLNode.convertXMLNodeToString(node3).contains("InChI"))
        inchi = node3.getCharacters();
    } catch (NullPointerException e) //Catch metabolites with no inchi codes
    {
      System.err.println("No inchi code");
      inchi = "";
    }

    StringBuffer uniprotSb = new StringBuffer();
    for (int x = 0; x < sp.getNumCVTerms(); x++)
    {
      CVTerm term = sp.getCVTerm(x);
      XMLAttributes att = term.getResources();
      for (int y = 0; y < att.getLength(); y++)
      {
        String uri = att.getValue(y);
        if (uri.contains("chebi"))
        {
          chebi = uri;
        } else if (uri.contains("kegg"))
        {
          kegg = uri;
        } else if (uri.contains("sgd"))
        {
          sgd = uri;
        } else if (uri.contains("uniprot"))
        {
          uniprotSb.append("," + uri);
        }
      }
    }

    prep.setString(1, id);
    prep.setString(2, name);
    prep.setString(3, compartment);
    prep.setInt(4, sboTerm);
    prep.setString(5, chebi);
    prep.setString(6, kegg);
    prep.setString(7, inchi);
    prep.setString(8, sgd);
    uniprot = uniprotSb.toString();
    uniprot = uniprot.replaceFirst(",", "");
    prep.setString(9, uniprot);
    prep.addBatch();
  }

  //============================
  //Load reactions into table
  //============================
  PreparedStatement prep4 = conn.prepareStatement("insert into reaction values (?, ?, ?, ?, ?, ?, ?);");
  PreparedStatement prep2 = conn.prepareStatement("insert into reactionspecies values (?, ?, ?, ?);");
  PreparedStatement prep5 = conn.prepareStatement("insert into kineticlaw values (?, ?, ?, ?, ?);");
  PreparedStatement prep6 = conn.prepareStatement("insert into parameter values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);");
  ListOfReactions reactions = m.getListOfReactions();
  for (int i = 0; i < reactions.size(); i++)
  {
    Reaction r = (Reaction) reactions.get(i);
    String id = r.getId();
    String name = r.getName();
    int sboTerm = r.getSBOTerm();

    //Sort out subsystem
    String anno = r.getNotesString();
    int start = anno.indexOf("<p>");
    int end = anno.indexOf("</p>");

    //Sort out pubmed annotations for reaction
    String ec = "";
    String pubmed = "";
    for (int x = 0; x < r.getNumCVTerms(); x++)
    {
      CVTerm term = r.getCVTerm(x);
      XMLAttributes att = term.getResources();
      for (int y = 0; y < att.getLength(); y++)
      {
        uri = att.getValue(y);
        if (uri.contains("ec-code"))
        {
          ec = uri;
        } else if (uri.contains("pubmed"))
        {
          pubmed = uri;
        }
      }
    }

    prep4.setString(1, id);
    prep4.setString(2, name);
    prep4.setInt(3, sboTerm);
    prep4.setString(4, subsystem);
    prep4.setString(5, ec);
    prep4.setString(6, pubmed);
    prep4.setString(7, "");
    prep4.addBatch();

    ListOfSpeciesReferences reactants = r.getListOfReactants();
    for (int x = 0; x < reactants.size(); x++)
    {
      SpeciesReference spRef = (SpeciesReference) reactants.get(x);
      species = spRef.getSpecies();
      prep2.setString(1, id);
      prep2.setString(2, species);
      prep2.setDouble(3, spRef.getStoichiometry());
      prep2.setString(4, "reactant");
      prep2.addBatch();
    }

    ListOfSpeciesReferences products = r.getListOfProducts();
    for (int x = 0; x < products.size(); x++)
    {
      SpeciesReference spRef = (SpeciesReference) products.get(x);
      species = spRef.getSpecies();
      prep2.setString(1, id);
      prep2.setString(2, species);
      prep2.setDouble(3, spRef.getStoichiometry());
      prep2.setString(4, "product");
      prep2.addBatch();
    }

    ListOfSpeciesReferences modifiers = r.getListOfModifiers();
    for (int x = 0; x < modifiers.size(); x++)
    {
      ModifierSpeciesReference spRef = (ModifierSpeciesReference) modifiers.get(x);
      species = spRef.getSpecies();
      prep2.setString(1, id);
      prep2.setString(2, species);
      prep2.setDouble(3, 0);
      prep2.setString(4, "modifier");
      prep2.addBatch();
    }

    //Load kinetic law data
    KineticLaw kl = r.getKineticLaw();
    String formula = kl.getFormula();
    String klId = "kl_" + r.getId();
    prep5.setString(1, klId);
    prep5.setString(2, r.getId());
    prep5.setString(3, formula);
    prep5.setString(4, "");
    prep5.setString(5, "");
    prep5.addBatch();

    //Load Parameter data from reaction
    ListOfParameters params = kl.getListOfParameters();
    for(int x = 0; x < params.size(); x++)
    {
      Parameter p = params.get(x);
      System.out.println(p.getId());
      prep6.setString(2, p.getId());
      prep6.setString(3, "");
      prep6.setString(4, "reaction");
      prep6.setString(5, klId);
      prep6.setString(6, p.getId());
      prep6.setString(6, "");
      String stValue = Double.toString(p.getValue()); 
      prep6.setString(7, "");
      prep6.setString(8, stValue);
      prep6.setString(9, "");
      prep6.setString(10, "");
      prep6.addBatch();
    }
  }

  //Load arbitary parameters from model
  ListOfParameters params = m.getListOfParameters();
  for(int x = 0; x < params.size(); x++)
  {
    Parameter p = params.get(x);
    System.out.println(p.getId());
    prep6.setString(2, p.getId());
    prep6.setString(3, "");
    prep6.setString(4, "arbitraryVariable");
    prep6.setString(5, "");
    prep6.setString(6, p.getId());
    prep6.setString(6, "");
    String stValue = Double.toString(p.getValue()); 
    prep6.setString(7, "");
    prep6.setString(8, stValue);
    prep6.setString(9, "");
    prep6.setString(10, "");
    prep6.addBatch();
  }

  conn.setAutoCommit(false);
  prep1.executeBatch();
  prep.executeBatch();
  prep2.executeBatch();
  prep4.executeBatch();
  prep5.executeBatch();
  prep6.executeBatch();
  conn.setAutoCommit(true);
  conn.close();

} catch (ClassNotFoundException e)
{
  e.printStackTrace();
} catch (SQLException e)
{
  e.printStackTrace();
}</pre></div>                </td>
              </tr>
                          <tr>
                <td><b>userId</b></td>
                <td>stringconstant</td>
                <td>
                                    <div><h3>Value</h3>dada</div>                </td>
              </tr>
                          <tr>
                <td><b>createSimulationResource</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>sendModel</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>sendExptalDataSbrml</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>queryKRDB</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>checkData</b></td>
                <td>beanshell</td>
                <td>
                                    <div><h3>Script</h3><pre>import org.sbml.libsbml.*;

//To hold model species ids
spIds = new ArrayList();

//For output
sb = new StringBuffer();
sb2 = new StringBuffer();

//Extract species ids and names from sbml model
SBMLDocument doc = libsbml.readSBMLFromString(sbml);
Model m = doc.getModel();
ListOfSpecies splist = m.getListOfSpecies();
sb.append("Species in SBML model\n");
for(int i = 0; i < splist.size(); i++)
{
  Species s = splist.get(i);
  sb.append(s.getId() + "\t");
  spIds.add(s.getId());
  sb.append(s.getName() + "\n");
} 
//String out = sb.toString();

//Extract species ids from SBRML file
sb.append("Species in SBRML file\n");
String[] lines = sbrml.split("\n");
for(int x = 0; x < lines.length; x ++)
{
  //Check
  String line = lines[x];
  if(line.contains("compositeValue indexValue"))
  {
    if(line.contains("CHEBI"))
    {
      x = x + 2;
      continue;
    }
    else
    {
      int start = line.indexOf("\"");
      int end = line.lastIndexOf("\"");
      String id = line.substring(start + 1, end);
      if(!spIds.contains(id))
      {
        x = x + 2;
        continue;
      }
      else
      {
	sb2.append(line + "\n");
        continue;
      }
    }
  }
  sb2.append(line + "\n");
}

String out = sb.toString();
String newSbrml = sb2.toString();</pre></div>                </td>
              </tr>
                          <tr>
                <td><b>parameterEditor</b></td>
                <td>beanshell</td>
                <td>
                                    <div><h3>Script</h3><pre>import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.event.ListSelectionListener;
import javax.swing.event.ListSelectionEvent;
import javax.swing.table.AbstractTableModel;

import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.Container;
import java.io.*;
import java.util.Hashtable;
import java.util.ArrayList;
import java.sql.*;


class Parameter
{
  String name;
  double value;
  String type;
  String modelId;
  String parameterId;

  Parameter(String name, String value, String type, String modelId, String parameterId)
  {
    this.name = name;
    this.value = Double.parseDouble(value);
    this.type = type; 
    this.modelId = modelId; 
    this.parameterId = parameterId;
  }

  String getName()
  {
    return name;
  }

  String setName(String name)
  {
    this.name = name;
  }

  double getValue()
  {
    return value;
  }

  String setValue(String value)
  {
    this.value = Double.parseDouble(value);
  }

  String getType()
  {
    return type;
  }

  String setType(String type)
  {
    this.type = type;
  }

  String getModelId()
  {
    return this.modelId;
  }

  String setModelId(String modelId)
  {
    this.modelId = modelId;
  }

  String getParameterId()
  {
    return parameterId;
  }

  String setParameterId(String parameterId)
  {
    this.parameterId = parameterId;
  }
}

/**
 * New table model for storing parameter data
 */
class MyTableModel extends AbstractTableModel
{
  //Set up data for table
  String[] colnames = {"Parameter name", "Value", "Lower bound", "Upper bound", "Affected experiment", "Object type", "Model Id"};
  int numrows = params.size();
  int numcols = 7;
  data = new String[numrows][numcols];
  //Iterate thru parameters
  for(int i = 0; i < params.size(); i++)
  {
    p = params.get(i);
    data[i][0] = p.getName();
    double value = p.getValue();
    data[i][1] = Double.toString(value);
    if(p.getType().equals("arbitraryVariable"))
    {
      //Lower bound value
      data[i][2] = Double.toString(value / 4);
      //Upper bound value
      data[i][3] = Double.toString(value * 4);
      data[i][5] = "arbitraryVariable";
    }
    else if(p.getType().equals("reaction"))
    {
      //Lower bound value
      data[i][2] = Double.toString(value / 1000000);
      //Upper bound value
      data[i][3] = Double.toString(value * 1000000);
      data[i][5] = "reaction";
    }
    //Affected experiment
    data[i][4] = "all";
    //ModelId
    data[i][6] = p.getModelId();
  }

  public int getColumnCount()
  {
    return colnames.length;
  }

  public int getRowCount()
  {
    return data.length;
  }

  public String getColumnName(int col)
  {
    return colnames[col];
  }

  public Object getValueAt(int row, int col)
  {
    return data[row][col];
  }

  /*
   * JTable uses this method to determine the default renderer/
   * editor for each cell.  If we didn't implement this method,
   * then the last column would contain text ("true"/"false"),
   * rather than a check box.
   */
  public Class getColumnClass(int c)
  {
    return getValueAt(0, c).getClass();
  }

  /*
   * Don't need to implement this method unless your table's
   * editable.
   */
  public boolean isCellEditable(int row, int col)
  {
    //Note that the data/cell address is constant,
    //no matter where the cell appears onscreen.
    if (col < 2)
      return false;
    else
      return true;
  }

  /*
   * Don't need to implement this method unless your table's
   * data can change.
   */
  public void setValueAt(Object value, int row, int col)
  {
    data[row][col] = value;
    fireTableCellUpdated(row, col);
  }

  public String[][] getData()
  {
    return data;
  }
}

String DATABASE_NAME = "taverna_sbml";
String databaseURL = "jdbc:sqlite:" + DATABASE_NAME + ".db";

//Get parameter data from database
params = new ArrayList();
try
{
  driver = "org.sqlite.JDBC";
  Class.forName(driver);
  Connection conn = DriverManager.getConnection(databaseURL);
  Statement stat = conn.createStatement();
  
  sql = "select name, stValue, type, kineticLawId from parameter;";
  ResultSet rs = stat.executeQuery(sql);
  
  while (rs.next())
  {
    name = rs.getString(1);
    stValue = rs.getString(2);
    type = rs.getString(3);
    kineticLawId = rs.getString(4);
    System.out.println(kineticLawId);
    if(kineticLawId.equals(""))
      modelId = name;
    else
      modelId = kineticLawId.replaceFirst("kl_", "");

    if(type.equals("reaction"))    
      parameterId = name;
    else
      parameterId = "";
    
    p = new Parameter(name, stValue, type, modelId, parameterId);
    params.add(p);
  }
  rs.close();
  conn.close();

}
catch (ClassNotFoundException e)
{
  e.printStackTrace();
}
catch (SQLException e)
{
  e.printStackTrace();
}

/**
 * Class representing the SetFitItemsAndMethod XML document
 */

class Document
{
  String contents;

  Document()
  {
    this.contents = "";
  }

  synchronized void setContents(String data)
  {
    this.contents = data;
    notifyAll();
  }

  synchronized String getContents()
  {
    while (contents.equals(""))
    {
      try
      {
        wait();
      }
      catch (InterruptedException e)
      {
        e.printStackTrace();
      }
    }
    return contents;
  }
}


/**
 * Class representing the GUI for selecting the values to be
 * processed by the remainder of the workflow.
 */
MultipleSelectWorkerGUI(Document doc)
{
  JTable table;
  DefaultTableModel tablemodel;
  JSplitPane splitPane;
  JTextArea expCondition;
  JList list;
  JButton submitButton;

  Document doc;
  
  void init()
  {
    super.frame = new JFrame("Select data for downstream analysis");
    super.frame.setLocationRelativeTo(null); //Place window in centre
    pane = new JPanel(); 
    super.frame.getContentPane().add(pane); 
    pane.setLayout(new BoxLayout(pane, BoxLayout.PAGE_AXIS));
    this.doc = doc;

    table = new JTable(new MyTableModel());

    //Detect row clicked
    rowListener = new ListSelectionListener()
    {
      void valueChanged(ListSelectionEvent event)
      {
        if (event.getValueIsAdjusting())
        {
          return;
        }
        //Selected row changed, do something...
        showReactionInstIds();
      }
    };

    table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    DefaultListSelectionModel lst = table.getSelectionModel();
    lst.addListSelectionListener(rowListener);

    JScrollPane tableScrollPane = new JScrollPane(table);
    pane.add(tableScrollPane);

    //Create a panel
    JPanel buttonPane = new JPanel();
    submitButton = new JButton("Submit");
    submitButton.setActionCommand("submit");
    submitButton.addActionListener(this);
    submitButton.setEnabled(false);
    buttonPane.add(submitButton);
    buttonPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
    pane.add(submitButton);

    //frame.setSize(800,500);
    frame.setVisible(true); 
    frame.pack(); 
  }

  //This method is called only if there is a valid selection
  //and if the submit button is clicked
  void actionPerformed(ActionEvent e)
  {
    ArrayList al = new ArrayList();

    //New
    String command = e.getActionCommand();

    tmodel = table.getModel();
    data = tmodel.getData();

    if("submit".equals(command))
    {
      //Generate setFitItem XML document
      StringBuffer sb = new StringBuffer();
      //Set userId and resourceId
      sb.append("<SetFitItemsAndMethod xmlns=\"http://parameterestimationws.services.copasiws.copasi.org/types\">\n");
      sb.append("\t<resourceId xmlns=\"\">" + resourceId + "</resourceId>\n");
      sb.append("\t<userId xmlns=\"\">" + userId + "</userId>\n");
      sb.append("\t<fitItemsAndMethod xmlns=\"\">\n");

      for(int i = 0; i < data.length; i++)
      {
        sb.append("\t\t<itemToFit ");
        sb.append("lowerBound=\"" + data[i][2] + "\" ");
        sb.append("upperBound=\"" + data[i][3] + "\" ");
        sb.append("startValue=\"" + data[i][1] + "\" ");
        sb.append("modelObjectType=\"" + data[i][5] + "\">\n");
         
        if(data[i][5].equals("reaction"))
        {
          sb.append("\t\t\t<reaction quantityType=\"parameterValue\">\n");
          sb.append("\t\t\t\t<modelId>" + data[i][6] + "</modelId>\n");
          sb.append("\t\t\t\t<parameterID>" + data[i][0] + "</parameterID>\n");
          sb.append("\t\t\t</reaction>\n");
          sb.append("\t\t\t<affectedExperiment>" + data[i][4] + "</affectedExperiment>\n");
          sb.append("\t\t</itemToFit>\n");
        }

        if(data[i][5].equals("arbitraryVariable"))
        {
          sb.append("\t\t\t<arbitraryVariable quantityType=\"initialValue\">\n");
          sb.append("\t\t\t\t<modelId>" + data[i][0] + "</modelId>\n");
          sb.append("\t\t\t</arbitraryVariable>\n");
          sb.append("\t\t\t<affectedExperiment>" + data[i][4] + "</affectedExperiment>\n");
          sb.append("\t\t</itemToFit>\n");
        }
      }

      sb.append("\t\t<method methodName=\"Levenberg-Marquardt\">\n");
      sb.append("\t\t\t<levenbergMarquardt>\n");
      sb.append("\t\t\t\t<iterationLimit>200</iterationLimit>\n");
      sb.append("\t\t\t\t<tolerance>1.0E-6</tolerance>\n");
      sb.append("\t\t\t</levenbergMarquardt>\n");
      sb.append("\t\t</method>\n");

/*
      sb.append("\t\t<method methodName=\"Genetic Algorithm\">\n");
      sb.append("\t\t\t<geneticAlgorithm>\n");
      sb.append("\t\t\t\t<numberOfGenerations>200</numberOfGenerations>\n");
      sb.append("\t\t\t\t<populationSize>20</populationSize>\n");
      sb.append("\t\t\t\t<randomNumberGenerator>1</randomNumberGenerator>\n");
      sb.append("\t\t\t\t<seed>0</seed>\n");
      sb.append("\t\t\t</geneticAlgorithm>\n");
      sb.append("\t\t</method>\n");
*/
      sb.append("\t</fitItemsAndMethod>\n");
      sb.append("</SetFitItemsAndMethod>\n");

      this.document.setContents(sb.toString());
      super.frame.dispose();         
    }
  }

  void showReactionInstIds()
  {
    for (int c : table.getSelectedRows())
    {
      rowSelected = "Row selected: " + c;
      row = c;
      tmodel = table.getModel();
      System.out.println("New row clicked");
      submitButton.setEnabled(true);
    }
  }

  init(); 
  return this; 
}

/**
 * Wrapper for MultipleSelectWorkerGUI
 */ 
class WorkerWrapper extends Thread
{
  Document document; 

  WorkerWrapper(Document document)
  {
    this.document = document;
  }

  void run()
  {
    msw = MultipleSelectWorkerGUI(this.document);
  }
}

document = new Document();
wrapper = new WorkerWrapper(document);
wrapper.start();
String setFitItemsAndMethodXML = document.getContents();</pre></div>                </td>
              </tr>
                          <tr>
                <td><b>setFitItemsAndMethod</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>startSimulator</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>pollStatus</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>getResults</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
                          <tr>
                <td><b>releaseResources</b></td>
                <td>workflow</td>
                <td>
                                                    </td>
              </tr>
            
          </table>
        
      </div>
    </div>
    
    <!-- Beanshells -->
        <div class="fold">
      <div class="foldTitle">
        Beanshells (9)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Name</th>
              <th>Description</th>
              <th>Inputs</th>
              <th>Outputs</th>
            </tr>
          
                          <tr>
                <td><b>createSysbioDataSource</b></td>
                <td></td>
                <td>
                  
                    
                      sbml                      
                    
                  
                </td>
                <td>
                  
                    
                      databaseURL                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>checkData</b></td>
                <td></td>
                <td>
                  
                    
                      sbml                      <hr />
                    
                      sbrml                      
                    
                  
                </td>
                <td>
                  
                    
                      out                      <hr />
                    
                      newSbrml                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>parameterEditor</b></td>
                <td></td>
                <td>
                  
                    
                      userId                      <hr />
                    
                      resourceId                      
                    
                  
                </td>
                <td>
                  
                    
                      setFitItemsAndMethodXML                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>createCountUrl</b></td>
                <td></td>
                <td>
                  
                    
                      date                      <hr />
                    
                      title                      
                    
                  
                </td>
                <td>
                  
                    
                      url                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>cleanCountData</b></td>
                <td></td>
                <td>
                  
                    
                      inStr                      
                    
                  
                </td>
                <td>
                  
                    
                      outStr                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>createQueryUrl</b></td>
                <td></td>
                <td>
                  
                    
                      count                      <hr />
                    
                      date                      <hr />
                    
                      title                      
                    
                  
                </td>
                <td>
                  
                    
                      url                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>cleanData</b></td>
                <td></td>
                <td>
                  
                    
                      inStr                      
                    
                  
                </td>
                <td>
                  
                    
                      outStr                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>extractChebiIds</b></td>
                <td></td>
                <td>
                  
                    
                      sbrml                      
                    
                  
                </td>
                <td>
                  
                    
                      chebiIds                      
                    
                  
                </td>
              </tr>
                          <tr>
                <td><b>merge</b></td>
                <td></td>
                <td>
                  
                    
                      speciesIds                      <hr />
                    
                      chebiIds                      <hr />
                    
                      sbrml                      
                    
                  
                </td>
                <td>
                  
                    
                      sbrml_out                      
                    
                  
                </td>
              </tr>
            
          </table>
        
      </div>
    </div>
    
    <!-- Sinks -->
        <div class="fold">
      <div class="foldTitle">
        Outputs (1)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Name</th>
              <th>Description</th>
            </tr>
          
                          <tr>
                <td><b>optimised_sbml</b></td>
                <td>
                  
                    
                      An SBML model optimised against data from the MCISB key results database.                      
                    
                  
                </td>
              </tr>
            
          </table>
        
      </div>
    </div>
    
    <!-- Datalinks -->
        <div class="fold">
      <div class="foldTitle">
        Datalinks (22)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Source</th>
              <th>Sink</th>
            </tr>
          
                          <tr>
                <td>sbml</td>
                <td>createSysbioDataSource:sbml</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>createSimulationResource:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>sendModel:resourceId</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>sendModel:userId</td>
              </tr>
                          <tr>
                <td>sbml</td>
                <td>sendModel:sbml</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>sendExptalDataSbrml:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>sendExptalDataSbrml:resourceId</td>
              </tr>
                          <tr>
                <td>checkData:newSbrml</td>
                <td>sendExptalDataSbrml:sbrml</td>
              </tr>
                          <tr>
                <td>queryKRDB:new_sbrml</td>
                <td>checkData:sbrml</td>
              </tr>
                          <tr>
                <td>sbml</td>
                <td>checkData:sbml</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>parameterEditor:resourceId</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>parameterEditor:userId</td>
              </tr>
                          <tr>
                <td>parameterEditor:setFitItemsAndMethodXML</td>
                <td>setFitItemsAndMethod:fitItemsAndMethodXML</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>startSimulator:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>startSimulator:resourceId</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>pollStatus:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>pollStatus:resourceId</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>getResults:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>getResults:resourceId</td>
              </tr>
                          <tr>
                <td>userId:value</td>
                <td>releaseResources:userId</td>
              </tr>
                          <tr>
                <td>createSimulationResource:resourceId</td>
                <td>releaseResources:resourceId</td>
              </tr>
                          <tr>
                <td>getResults:result</td>
                <td>optimised_sbml</td>
              </tr>
            
          </table>
        
      </div>
    </div>
    
    <!-- Coordinations -->
        <div class="fold">
      <div class="foldTitle">
        Coordinations (7)
      </div>
      <div class="foldContent" style="display: none;">
                  <table class="simple">
            <tr>
              <th>Controller</th>
              <th>Target</th>
            </tr>
          
                          <tr>
                <td>startSimulator</td>
                <td>pollStatus</td>
              </tr>
                          <tr>
                <td>getResults</td>
                <td>releaseResources</td>
              </tr>
                          <tr>
                <td>setFitItemsAndMethod</td>
                <td>startSimulator</td>
              </tr>
                          <tr>
                <td>createSysbioDataSource</td>
                <td>parameterEditor</td>
              </tr>
                          <tr>
                <td>sendExptalDataSbrml</td>
                <td>setFitItemsAndMethod</td>
              </tr>
                          <tr>
                <td>pollStatus</td>
                <td>getResults</td>
              </tr>
                          <tr>
                <td>sendModel</td>
                <td>sendExptalDataSbrml</td>
              </tr>
            
          </table>
        
      </div>
    </div>
  
    

          
      
    </div>

  </div>

</div>

<div class="contribution_right_box">
  <div class="contribution_section_box" style= "font-size: 100%; padding: 0.7em 0.9em; font-weight: bold;">
    <p><img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[The type of workflow system that this Workflow is designed for.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" /> Workflow Type</p>
    <p><a href="/content_types/2">Taverna 2</a></p>
  </div>

  <div class="contribution_section_box">
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[The Uploader is the person who uploaded/created this Workflow on myExperiment, and who manages it on myExperiment.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Uploader
	</p>
	<p>
		<center>
			<div class="avatar" style="width: 66px">
  <a href="/users/221"><img alt="254?size=60x60" class="framed" src="/pictures/show/254?size=60x60" title="Peter Li" /></a>
  
	<span style="display:block;margin-top:2px;text-align:center;">
		
			<img alt="Cn" src="/images/famfamfam_flags/cn.png?1680607579" style="vertical-align:middle; margin-right: 0.3em;" title="header=[] body=[&lt;b&gt;Location: &lt;/b&gt;Hong Kong, China] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		

    
			<a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
		

    
	</span>
  
</div>

		</center>
	</p>
</div>


  

  

<div class="contribution_section_box">
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This specifies what rights users have when they download and use this Workflow.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		License
		<a name="license"></a>
	</p>

  

    
    
    
    
    


    

    <!--

    <rdf:RDF xmlns="http://creativecommons.org/ns#"
        xmlns:dc="http://purl.org/dc/elements/1.1/"
        xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
    <Work rdf:about="">
       <dc:title>SBML model optimisation</dc:title>
       <dc:date>2010-03-26 17:21:53 UTC</dc:date>
       <dc:description>&lt;p&gt;
This workflow modifies reaction kinetic parameters against experimental data stored in the MCISB key results database
&lt;/p&gt;

</dc:description>
       <dc:creator><Agent>
          <dc:title><a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a></dc:title>
       </Agent></dc:creator>
       <dc:rights><Agent>
          <dc:title><a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a></dc:title>
       </Agent></dc:rights>
       <dc:type rdf:resource="http://purl.org/dc/dcmitype/Data" />
       <dc:source rdf:resource="http://www.myexperiment.org/workflows/1201.html"/>
       <license rdf:resource="http://creativecommons.org/licenses/by-sa/3.0/" />
    </Work>

    <License rdf:about="http://creativecommons.org/licenses/by-sa/3.0/">
      <permits rdf:resource="http://creativecommons.org/ns#Reproduction" />  <permits rdf:resource="http://creativecommons.org/ns#Distribution" />  <requires rdf:resource="http://creativecommons.org/ns#Notice" />  <requires rdf:resource="http://creativecommons.org/ns#Attribution" />  <permits rdf:resource="http://creativecommons.org/ns#DerivativeWorks" />  <requires rdf:resource="http://creativecommons.org/ns#ShareAlike" />
    </License>

    </rdf:RDF>

    -->

  

  <div class="contribution_currentlicense">
    <p>
      
        All versions of this Workflow are
      
      
        licensed under: <br/><br/><a rel="Copyright" href="/licenses/2" title="Creative Commons Attribution-Share Alike 3.0 Unported License"><img src="/images/by-sa.png" /></a>
      
    </p>
  </div>
	
</div>


  <script type="text/javascript">
    function showVersion(form) {
        var url = $("resource_versions").value;
        location.href = url;
        form.submit
    }
</script>
<style>
  .version_selection {
      font-size:smaller;
      text-align: center;
  }
</style>

<div class="contribution_section_box">
  <p class="heading">
    <img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[This box shows version 1 for this entry] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />    <span>Version 1 </span>
    <span class="count_text">(of 1)</span>
  </p>
  
</div>

  <div class="contribution_section_box">
	
	<p class="heading" style="margin-bottom: 0; padding-bottom: 0;">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[Which people/groups get the credit for this Workflow?] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Credits <span class="count_text">(1)</span>
		<a name="credits"></a>
	</p>
	<span style="font-size: 85%; color: #666666; display: block; padding: 0.3em 0.5em 0 0.5em; margin: 0; line-height: 1em;">(People/Groups)</span>
	
		<div style="font-size: 85%;">
			<ul class="items">
				
					<li>
						
							
								<span class="icon"><img alt="User" src="/images/famfamfam_silk/user.png?1680607579" /> </span> 
							
							<a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
						
					</li>
				
			</ul>
		</div>
	
	
	
	<p class="heading" style="margin-bottom: 0; padding-bottom: 0;">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[What other Workflows/Files is this one based on?] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Attributions <span class="count_text">(0)</span>
		<a name="attributions"></a>
	</p>
	<span style="font-size: 85%; color: #666666; display: block; padding: 0.3em 0.5em 0 0.5em; margin: 0; line-height: 1em;">(Workflows/Files)</span>
	
		<p class="none_text">None</p>
	
	
	
	
</div>


  


  <div class="contribution_section_box">
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[The tags for this Workflow entry.&lt;br/&gt;Note(1): if this Workflow has many versions, the tags apply to ALL versions in this entry.&lt;br/&gt;Note(2): the size of the tags show how popular they are on myExperiment.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Tags <span id="tags_box_header_tag_count_span" class="count_text">(4)</span>
		<a name="tags"></a>
	</p>

	<script type="text/javascript">
  function showAllTags() {
    Element.show('all_tags');
	  Element.hide('user_tags');
	  return false;
  }
  
  function showUsersTags() {
  	Element.hide('all_tags');
	  Element.show('user_tags');
	  return false;
  }
	
	function flip_tags_mode()
	{
		if( $('toggle_tags_mode').checked )
		  showUsersTags();
	  else
		  showAllTags();
	}
</script>

<div id="tags_inner_box">
	
		<div class="box_currentuser_specific" style="padding: 0.3em 0.2em; margin: 0.6em 0.4em;">
		  <label for="toggle_tags_mode" style="font-size: 85%; font-weight: bold;"><input id="toggle_tags_mode" name="toggle_tags_mode" onclick="flip_tags_mode();" style="margin-right: 0.3em;" type="checkbox" value="1" />Uploader tags</label>
		</div>
		<div id="all_tags">
			
				<div class="hTagcloud">
  <ul class="popularity">
    <li><a href='/tags/1225' class='vvvv-popular'>model</a></li>
<li> | </li>
    <li><a href='/tags/1824' class='popular'>model_optimisation</a></li>
<li> | </li>
    <li><a href='/tags/610' class='v-popular'>sbml</a></li>
<li> | </li>
    <li><a href='/tags/1865' class='popular'>systems_biology</a></li>
  </ul>
</div>

			
		</div>
		<div id="user_tags"  style="display: none;">
			
				<div class="hTagcloud">
  <ul class="popularity">
    <li><a href='/tags/1225' class='vvvv-popular'>model</a></li>
<li> | </li>
    <li><a href='/tags/1824' class='popular'>model_optimisation</a></li>
<li> | </li>
    <li><a href='/tags/610' class='v-popular'>sbml</a></li>
<li> | </li>
    <li><a href='/tags/1865' class='popular'>systems_biology</a></li>
  </ul>
</div>

			
		</div>
	
</div>
	
	
	
	
		<p><small><b><a href="/session/new">Log in</a></b> to add Tags</small></p>
	
</div>


  
<div class="contribution_section_box">
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[All the Groups that this item has been shared with] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Shared with Groups <span class="count_text">(0)</span>
	</p>
	
		<p class="none_text">None</p>
	
</div>

  <div class="contribution_section_box" id="in_packs_box">
  
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[All the Packs that this item (or versions of this item [[if available]]) is referred to in] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Featured In Packs  <span class="count_text">(1)</span>
		<a name="featured_in_packs"></a>
	</p>
	
		<div style="font-size: 85%;">
			<ul class="items">
				
					<li>
						
							<span class="icon"><img alt="Pack" src="/images/manhattan_studio/folder-closed_16.png?1680607579" /> </span>
							<a href="/packs/107">Systematic integration of experimental data and models in systems biology</a>
						
					</li>
				
			</ul>
		</div>
	
	
	
		<p><small><b><a href="/session/new">Log in</a></b> to add to one of your Packs</small></p>
	
</div>


  <div class="contribution_section_box">
	
	<p class="heading" style="margin-bottom: 0; padding-bottom: 0;">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[Shows files and workflows that have attributed this Workflow.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Attributed By <span class="count_text">(0)</span>
	  <a name="attributed_by"></a>
	</p>
	<span style="font-size: 85%; color: #666666; display: block; padding: 0.3em 0.5em 0 0.5em; margin: 0; line-height: 1em;">(Workflows/Files)</span>
	
		
		<p class="none_text">None</p>
	
	
</div>


  
<div class="contribution_section_box">
	<p class="heading">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[The users who have added this Workflow to their favourites] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Favourited By <font class="count_text">(0)</font>
		<a name="favourited_by"></a>
	</p>
	
	
		<p class="none_text">No one</p>
	
	
	
</div>

  

<div class="contribution_section_box">
	<p class="heading" style="margin-bottom: 0.3em;">
		<img alt="Information" src="/images/famfamfam_silk/information.png?1680607579" style="vertical-align:middle;" title="header=[] body=[Viewing / download counts are grand totals for this Workflow.&lt;br/&gt;Click &#39;see breakdown&#39; to view details.] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		Statistics
	</p>
	
	<div class="stats_box"> 
		<p style="font-size: 85%;">
  2333 viewings
</p>

	<p style="font-size: 85%;">
	  1643 downloads
	</p>

<p style="margin-top: 0.2em;">
	<small>[ <a href="/workflows/1201/statistics">see breakdown</a> ]</small>
</p>
		
		<div class="fold" style="padding-top: 0.6em;">
			<div class="foldTitle">More</div>
			<div class="foldContent" style="display: none; text-align: left;">
				
					<p>
						<a href="#credits">1 credit</a> <!-- won't work for type=='group'; needs anchor called '#group_creditations' -->
					</p>
					
					<p>
						<a href="#attributions">0 attributions</a>
					</p>
				
				
				
					<p>
			      <a href="#tags">4 tags</a>
			    </p>
				
				
				
					<p>
			      <a href="#favourited_by">0 favourites</a>
			    </p>
				

				
					<p>
						<a href="#citations">0 citations</a>
			    </p>
				
				
				
					<p>
			      <a href="#reviews">0 reviews</a>
			    </p>
				
				
				
			    <p>
			    	<a href="#comments">0 comments</a>
			    </p>
				
			</div>
		</div>
		
		
		
		
	</div>
</div>

</div>

<div class="clearer">&nbsp;</div>

<!-- BEGIN tabs -->

<br/>

<div id="tabsContainer" class="tabsContainer"></div>

<div class="tabContainer">
  <div class="tabTitle">Citations (0)</div>
  <div class="tabContent">

    <a name="citations"></a>
    
      <p><i>None</i></p>
    
		
		<br/>

    

  </div>
</div>


<div class="tabContainer">
  <div class="tabTitle">Version History</div>
  <div class="tabContent">
    <a name="version_history"></a>
    <p>In chronological order:</p>

<ol class="version_history">
  
    <li>
      <div class="title">
        <a href="/workflows/1201/versions/1">SBML model optimisation</a>
      </div>
      <div class="metadata">

        <p>
          Created
          
            by <a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
          
          on Friday 26 March 2010 17:21:56 (UTC)
        </p>

        

        
      </div>
    </li>
  
</ol>


  </div>
</div>



<!-- END tabs -->

<br/>
<br/>

<div id="ratingsBox">
  <h2>
	<span class="icon"><img alt="Reviews" src="/images/famfamfam_silk/report.png?1680607579" /> </span>	<span style="vertical-align: middle;"><a href="/workflows/1201/reviews">Reviews</a></span>
	<span class="count_text" style="vertical-align: middle;">(0)</span>
</h2>

<div class="reviewsBox">

	
		<p><i>No reviews yet</i></p>
		<a name="reviews"></a>
		<p style="margin-top: 0.6em;">
			<strong><a href="/workflows/1201/reviews/new">Be the first to review!</a></strong>
		</p>
	
	
</div>

</div>

<br/>
<br/>

<div id="commentsBox">
  <script src="/javascripts/ckeditor/ckeditor.js?1680607579" type="text/javascript"></script>
<script src="/javascripts/widgets/tooltip.js?1680607579" type="text/javascript"></script>

<h2>
	<span class="icon"><img alt="Comments" src="/images/famfamfam_silk/comments.png?1680607579" /> </span>	<span style="vertical-align: middle;">Comments</span>
	<span class="count_text" style="vertical-align: middle;">(0)</span>
</h2>

<ul class="sectionIcons">
  <li><span class="icon"><a href="http://www.myexperiment.org/workflows/1201/comments/timeline"><img alt="Timeline" src="/images/famfamfam_silk/timeline_marker.png?1680607579" /> View Timeline</a></span></li>
</ul>

<div class="commentsBox">
	
	
		<p><i>No comments yet</i></p>
		<a name="comments"></a>
		
			<p style="margin-top: 0.6em;"><strong><a href="/session/new">Log in</a> to make a comment </strong></p>
		
	
	
	<br/>
	
	

</div>


</div>

<!-- Other workflows that use a service this workflow users -->

<br />
<br />

<h2>
  <span class="icon"><img alt="Workflow" src="/images/redmond_studio/applications_16.png?1680607579" /> </span>  <span style="vertical-align: middle;">Other workflows that use similar services</span>
  <span class="count_text" style="vertical-align: middle;">(2)</span>
</h2>




    






	

            
    <div class="resource_list_item ">

      <div class="avatar_panel">
        <div class="workflow_type_box">
          <a href="/content_types/2">Taverna 2</a>
        </div>
        <span class="owner">Uploader</span>
        <div class="avatar" style="width: 66px">
  <a href="/users/221"><img alt="254?size=60x60" class="framed" src="/pictures/show/254?size=60x60" title="Peter Li" /></a>
  
	<span style="display:block;margin-top:2px;text-align:center;">
		
			<img alt="Cn" src="/images/famfamfam_flags/cn.png?1680607579" style="vertical-align:middle; margin-right: 0.3em;" title="header=[] body=[&lt;b&gt;Location: &lt;/b&gt;Hong Kong, China] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		

    
			<a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
		

    
	</span>
  
</div>

        
      </div>

      <div class="main_panel">

                  <a name="Construction_of_skeleton_SBML_model_using_a_list_of_yeast_ORF_numbers"></a>

          <p class="title inline">
            <span class="icon"><img alt="Workflow" src="/images/redmond_studio/applications_16.png?1680607579" /> </span>
            
            <a href="/workflows/1197" title="Construction of skeleton SBML model using a list of yeast ORF numbers">Construction of skeleton SBML model using ...</a>
            <span style="font-weight:normal;">
              (1)
      </span>
      <ul class="inline sectionIcons">
	      		      <li><span class="icon"><a href="/workflows/1197/download"><img alt="Download" src="/images/redmond_studio/arrow-down_16.png?1680607579" /> Download</a></span></li>
                
	      
              
	      </ul>
          </p>
          <div class="desc">
                          <div class="preview">
                <a href="/workflows/1197"><img alt="Thumb" src="/workflows/1197/previews/thumb" /></a>
              </div>
                                                    This workflow generates a skeleton SBML model consisting of the metabolic reactions for a given list of yeast enzymes ORF numbers
                      </div>


          <p>
            <b>Created:</b> 2010-03-26            
              |	<b>Last updated:</b> 2010-03-26            
          </p>

          
            <p>
              <b>Credits:</b>
              
                
                  <span class="icon"><img alt="User" src="/images/famfamfam_silk/user.png?1680607579" /> </span>
                
                <a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
              
            </p>
          

          

              </div>
    </div>
  
            
    <div class="resource_list_item ">

      <div class="avatar_panel">
        <div class="workflow_type_box">
          <a href="/content_types/2">Taverna 2</a>
        </div>
        <span class="owner">Uploader</span>
        <div class="avatar" style="width: 66px">
  <a href="/users/221"><img alt="254?size=60x60" class="framed" src="/pictures/show/254?size=60x60" title="Peter Li" /></a>
  
	<span style="display:block;margin-top:2px;text-align:center;">
		
			<img alt="Cn" src="/images/famfamfam_flags/cn.png?1680607579" style="vertical-align:middle; margin-right: 0.3em;" title="header=[] body=[&lt;b&gt;Location: &lt;/b&gt;Hong Kong, China] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]" />
		

    
			<a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
		

    
	</span>
  
</div>

        
      </div>

      <div class="main_panel">

                  <a name="Construction_of_skeleton_SBML_model_using_subsystem_term"></a>

          <p class="title inline">
            <span class="icon"><img alt="Workflow" src="/images/redmond_studio/applications_16.png?1680607579" /> </span>
            
            <a href="/workflows/1198" title="Construction of skeleton SBML model using subsystem term">Construction of skeleton SBML model using ...</a>
            <span style="font-weight:normal;">
              (1)
      </span>
      <ul class="inline sectionIcons">
	      		      <li><span class="icon"><a href="/workflows/1198/download"><img alt="Download" src="/images/redmond_studio/arrow-down_16.png?1680607579" /> Download</a></span></li>
                
	      
              
	      </ul>
          </p>
          <div class="desc">
                          <div class="preview">
                <a href="/workflows/1198"><img alt="Thumb" src="/workflows/1198/previews/thumb" /></a>
              </div>
                                                    This workflow generates a skeleton SBML model consisting of the metabolic reactions for a given subsystem term.
                      </div>


          <p>
            <b>Created:</b> 2010-03-26            
              |	<b>Last updated:</b> 2010-03-26            
          </p>

          
            <p>
              <b>Credits:</b>
              
                
                  <span class="icon"><img alt="User" src="/images/famfamfam_silk/user.png?1680607579" /> </span>
                
                <a href="/users/221" title="header=[] body=[Peter Li] cssheader=[boxoverTooltipHeader] cssbody=[boxoverTooltipBody] delay=[200]">Peter Li</a>
              
            </p>
          

          

              </div>
    </div>
  








<!-- OpenURL context object -->

<span class="Z3988" title="url_ver=Z39.88-2004&amp;url_ctx_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Actx&amp;ctx_ver=Z39.88-2004&amp;ctx_tim=2023-08-16T04%3A43%3A53%2B00%3A00&amp;ctx_id=&amp;ctx_enc=info%3Aofi%2Fenc%3AUTF-8&amp;rft.title=SBML+model+optimisation&amp;rft.date=2010-03-26&amp;rft.au=Peter+Li&amp;rft.genre=unknown&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc"></span>
      </div>
    </div>




            <div id="ft">
          <div class="container">
  <div class="row">
    <div class="col-md-4 text-left">
      Funded by:
      <a href="http://biovel.eu">BioVeL</a>,
      <a href="http://www.epsrc.ac.uk/">EPSRC</a>,
      <a href="http://jisc.ac.uk/">JISC</a>,
      <a href="http://www.microsoft.com">Microsoft</a>

      <br/><br/>

      Affiliates:
      <a href="http://www.mygrid.org.uk">myGrid</a>,
      <a href="http://www.taverna.org.uk/">Taverna</a>,
      <a href="http://www.biocatalogue.org">BioCatalogue</a>
    </div>

    <div class="col-md-4 text-center">
      <a href="/about">About</a> |
      <a href="/privacy">Privacy</a> |
      <a href="http://wiki.myexperiment.org/index.php/Papers">Publications</a> |
      <a href="/feedback">Contact / Feedback</a> |
      <a href="http://lists.nongnu.org/mailman/listinfo/myexperiment-discuss">Mailing List</a>
    </div>

    <div class="col-md-4 text-right">
      Icons: <a href="http://www.famfamfam.com/lab/icons/silk/">Silk icon set 1.3</a><br/><br/>
      
    </div>

  </div>
  <div class="row">
    <div class="col-md-12 text-center">
      Copyright &#169; 2007 &ndash; 2018
      <a href="http://www.manchester.ac.uk/">The University of Manchester</a>
      and
      <a href="http://www.soton.ac.uk/">University of Southampton</a>
    </div>
  </div>
</div>

        </div>
    



<script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1498417-4', 'auto');
    ga('set', 'anonymizeIp', true);
    ga('send', 'pageview');
</script>




</body>
</html>

